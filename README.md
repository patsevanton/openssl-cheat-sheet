# Генерация открытых и закрытых ключей

## Генерация RSA-ключей

### Базовые команды:
- Генерация 2048-битного закрытого RSA-ключа:
  ```bash
  openssl genrsa -out KEY1.pem 2048
  ```

- Генерация 4096-битного закрытого RSA-ключа с шифрованием AES128:
  ```bash
  openssl genrsa -out KEY2.pem -aes128 4096
  ```

### Особенности:
- Размер ключа всегда указывается последним аргументом
- Пропуск аргумента `-out` выводит результат в стандартный вывод
- Файл PEM содержит как открытый, так и закрытый ключ в кодировке base64

### Доступные алгоритмы шифрования:
- `-aes128`, `-aes192`, `-aes256`
- `-des3`, `-des` (устаревшие, не рекомендуется использовать)

## Просмотр содержимого RSA-ключей

Для просмотра содержимого закрытого ключа:
```bash
openssl rsa -in KEY1.pem -text -noout
```

Содержимое включает:
- Модуль (modulus)
- Открытая экспонента (public exponent) 
- Закрытая экспонента (private exponent)
- Два простых числа
- Другие параметры RSA-математики

## Различия между зашифрованными и незашифрованными ключами

**Незашифрованный ключ:** начинается сразу с `-----BEGIN PRIVATE KEY-----`

**Зашифрованный ключ:** содержит заголовок с указанием алгоритма шифрования (например, `AES-128-CBC`)

## Дополнительные возможности

Просмотр всех доступных алгоритмов шифрования:
```bash
openssl list-cipher-algorithms
```

## Генерация других типов ключей

### DSA-ключи:
- Генерация параметров:
  ```bash
  openssl dsaparam -out DSA-PARAM.pem 1024
  ```
  
- Генерация ключей:
  ```bash
  openssl gendsa -out DSA-KEY.pem DSA-PARAM.pem
  ```

### Ключи на эллиптических кривых (EC):
- Генерация параметров:
  ```bash
  openssl genpkey -genparam -algorithm EC -pkeyopt ec_paramgen_curve:secp384r1 -out EC-PARAM.pem
  ```
  
- Генерация ключей:
  ```bash
  openssl genpkey -paramfile EC-PARAM.pem -out EC-KEY.pem
  ```

- Просмотр поддерживаемых кривых:
  ```bash
  openssl ecparam -list_curves
  ```

## Рекомендации по безопасности

- Используйте ключи длиной не менее 2048 бит
- Предпочтительны алгоритмы AES (aes128, aes192, aes256)
- Избегайте использования DES и DES3 как небезопасных
- Для EC-ключей рекомендуются кривые: secp521r1, secp384r1, secp256k1

**Примечание:** Для всех зашифрованных файлов в примерах использовался пароль "pracnet".
